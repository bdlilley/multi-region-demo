# ArgoCD

This folder contains Kubernetes manifests for all 4 clusters used in the demo.

A single ArgoCD instance is installed on the mgmt-1 in us-east-1; this single instance manages all 4 clusters using AWS IAM roles mapped to Kubernetes RBAC.

**Folder Organization**

|folder|description|
|---|---|
|[./_argocd-apps/](./_argocd-apps/)|Contains all ArgoCD Applications; these are applied as Kubernetes resources only to mgmt-1, which manages all other clusters.  Some apps refer to public helm charts (like gloo-platform), others refer to generated or static files in this repo.|
|[./_install_argocd/](./_install_argocd/)|Kustomize folder with patches to install ArgoCD with AWS IAM permissions to manage remote clusters.  Also contains Okta configuration for ArgoCD dashboard RBAC.|
|[./_mgmt-common/](./_mgmt-common/)|Resources that are deployed to both mgmt-1 and mgmt-2 via ArgoCD apps.|
|[./mgmt-demo/](./mgmt-demo/)|Gloo Plaatform resources for the demo.|
|[./workload-demo/](./workload-demo/)|Data plane resources for the demo; deployed to both workload clusters via ArgoCD apps.|
|mgmt-1, mgmt-2, workload-1, workload-2|Various resources that are specific to each cluster.|

**Generated Resources**

Some files are generated by Terraform in the [../terraform-eks/](../terraform-eks/) module.  All generated files are prefixed with `generated-`.  **You must set up your own values files and backend config for Terraform and run the module to generate resources before you apply them.**  See [../terraform-eks/README.md](../terraform-eks/README.md) for complete setup instructions.

